<!-- AndroidManifest-example.xml -->
<!-- Example manifest configuration for BreezeApp-engine -->
<!-- This file demonstrates the required permissions and service declarations -->

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mtkresearch.breezeapp.engine">

    <!-- ========================================================================
         CUSTOM PERMISSION DEFINITION
         ======================================================================== -->

    <!--
        Define signature-level permission for binding to AI engine service.
        Protection level "signature" ensures only apps signed with the same
        certificate can request this permission.
    -->
    <permission
        android:name="com.mtkresearch.breezeapp.engine.permission.BIND_AI_SERVICE"
        android:protectionLevel="signature"
        android:label="@string/permission_bind_engine_label"
        android:description="@string/permission_bind_engine_desc"
        android:icon="@drawable/ic_engine_permission" />

    <!--
        Optional: Privileged permission variant for system/OEM apps.
        Use only if needed for pre-installed scenarios.
    -->
    <!--
    <permission
        android:name="com.mtkresearch.breezeapp.engine.permission.BIND_AI_SERVICE_PRIVILEGED"
        android:protectionLevel="signature|privileged"
        android:label="@string/permission_bind_engine_privileged_label"
        android:description="@string/permission_bind_engine_privileged_desc" />
    -->

    <!-- ========================================================================
         REQUIRED PERMISSIONS
         ======================================================================== -->

    <!-- Storage access for model files -->
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"
        android:maxSdkVersion="28" />

    <!-- For wake lock during long inferences -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <!-- For network-based model downloads (optional) -->
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <!-- For foreground service (keep engine alive during inference) -->
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE_DATA_SYNC"
        android:minSdkVersion="34" />

    <!-- ========================================================================
         APPLICATION CONFIGURATION
         ======================================================================== -->

    <application
        android:name=".EngineApplication"
        android:allowBackup="false"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.BreezeEngine"
        android:extractNativeLibs="true"
        android:usesCleartextTraffic="false">

        <!-- ====================================================================
             AI ENGINE SERVICE
             ==================================================================== -->

        <!--
            Main AI inference service.
            - exported="true": Allows other apps to bind
            - permission: Enforces signature-level permission check
            - process=":engine": Runs in separate process for isolation
        -->
        <service
            android:name=".service.AIEngineService"
            android:exported="true"
            android:permission="com.mtkresearch.breezeapp.engine.permission.BIND_AI_SERVICE"
            android:process=":engine"
            android:foregroundServiceType="dataSync"
            android:enabled="true"
            android:stopWithTask="false">

            <!-- Intent filter for explicit binding by action -->
            <intent-filter>
                <action android:name="com.mtkresearch.breezeapp.engine.AI_SERVICE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>

            <!-- Metadata for service discovery -->
            <meta-data
                android:name="com.mtkresearch.breezeapp.engine.version"
                android:value="@string/engine_version" />
            <meta-data
                android:name="com.mtkresearch.breezeapp.engine.api_version"
                android:value="2" />
        </service>

        <!-- ====================================================================
             OPTIONAL COMPONENTS
             ==================================================================== -->

        <!--
            (Optional) Background initialization service.
            Pre-loads models on device boot for faster first inference.
        -->
        <!--
        <service
            android:name=".service.ModelPreloadService"
            android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </service>

        <receiver
            android:name=".receiver.BootReceiver"
            android:enabled="true"
            android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>
        -->

        <!--
            (Optional) Settings activity for debugging/diagnostics.
            Not required for production, but useful for QA.
        -->
        <!--
        <activity
            android:name=".ui.DiagnosticsActivity"
            android:label="@string/diagnostics_title"
            android:exported="false"
            android:theme="@style/Theme.BreezeEngine.Diagnostics">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        -->

        <!-- ====================================================================
             CONTENT PROVIDERS (for model file access)
             ==================================================================== -->

        <!--
            FileProvider for sharing model files with client apps (if needed).
            Use only for trusted clients with signature verification.
        -->
        <provider
            android:name="androidx.core.content.FileProvider"
            android:authorities="${applicationId}.fileprovider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/file_paths" />
        </provider>

    </application>

</manifest>

<!--
    STRINGS RESOURCES (strings.xml):

    <string name="app_name">BreezeApp Engine</string>
    <string name="engine_version">2.0.0</string>

    <string name="permission_bind_engine_label">Bind to BreezeApp AI Engine</string>
    <string name="permission_bind_engine_desc">
        Allows the application to bind to BreezeApp AI inference engine service
        for language model, vision, speech recognition, and text-to-speech capabilities.
        Only authorized applications with matching signature can bind.
    </string>

    <string name="permission_bind_engine_privileged_label">Bind to BreezeApp AI Engine (Privileged)</string>
    <string name="permission_bind_engine_privileged_desc">
        Allows system and privileged applications to bind to BreezeApp AI Engine service.
    </string>
-->

<!--
    CLIENT APP MANIFEST (BreezeApp-dot/AndroidManifest.xml):

    <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.mtkresearch.breezeapp">

        <!- - Request permission to bind engine service - ->
        <uses-permission android:name="com.mtkresearch.breezeapp.engine.permission.BIND_AI_SERVICE" />

        <application ... >
            ...
        </application>

    </manifest>
-->
